import{j as t,D as w,u as p,r as h,i as K,k as R,c as q,L as M,n as P,a as W,O as z,C as U,b as G,d as Y,P as X,e as J,p as Z,f as tt,g as et,h as nt,l as st,Q as at,m as it,o as ct,R as ot}from"./vendor-9254042d.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();const rt="_container_1b2o1_1",dt={container:rt},lt=()=>t.jsx("div",{className:dt.container,children:t.jsx("img",{src:"assets/images/404.webp",alt:"404 NOT FOUND"})}),mt="_box_1kyes_1",ut="_innerBox_1kyes_9",E={box:mt,innerBox:ut},B=({children:e})=>t.jsx("div",{className:E.box,children:t.jsx("div",{className:E.innerBox,children:e})}),_t="_contentBox_ma3om_1",gt={contentBox:_t},ht=({children:e})=>t.jsx("div",{className:gt.contentBox,children:e}),xt="_spinner_oa1xh_1",jt="_loader_oa1xh_12",pt="_loading_oa1xh_1",D={spinner:xt,loader:jt,loading:pt},C=()=>t.jsx("div",{className:D.spinner,children:t.jsx("span",{className:D.loader})}),yt=181,F=()=>{const e=w.now(),n=i=>w.fromFormat(i,"yyyy/MM/dd").plus({days:yt});return{getVacationEndDate:n,isValidVacation:i=>n(i)>e}},$={async get(e){return(await fetch(e)).json()}},H=()=>$.get("/api/members.json"),A=()=>$.get("/api/raid-histories.json"),V=()=>$.get("/api/raid-attendances.json"),bt={ACTIVE:"ACTIVE",RESIGNED:"RESIGNED",KICKED_ABANDON_DUTY:"KICKED_ABANDON_DUTY",KICKED_ABSCENT:"KICKED_ABSCENT"},vt=()=>p({queryKey:["getMembers"],queryFn:H,select:e=>e.filter(({status:n})=>n===bt.ACTIVE)}),Nt=()=>p({queryKey:["getRaidHistories"],queryFn:A}),ft=()=>p({queryKey:["getRaidAttendances"],queryFn:V}),Lt=()=>{const e=vt(),n=Nt(),s=ft(),i=e.isFetching&&n.isFetching&&s.isFetching,{getVacationEndDate:a,isValidVacation:c}=F(),r=h.useMemo(()=>{const{data:u=[]}=e,{data:_=[]}=s,y=_.reduce((o,{raidEndedAt:d,perfectAttendanceMemberUids:b})=>(b.forEach(l=>{K(o[l])&&(o[l]=0),c(d)&&(o[l]+=1)}),o),{});return u.map(o=>({...o,availableVacationCount:y[o.uid],usedVacationCount:0})).sort((o,d)=>o.nickname.localeCompare(d.nickname))},[e.data,n.data]),m=h.useMemo(()=>{const{data:u=[]}=e,{data:_=[]}=n,{data:y=[]}=s,o=R(u,"uid"),d=y.sort((l,k)=>k.raidNo.localeCompare(l.raidNo)).at(0);if(!d)return null;const b=_.find(({no:l})=>d.raidNo===l);return b?{raidNo:b.no,raidName:b.name,raidEndedAt:d.raidEndedAt,vacationEndedAt:a(d.raidEndedAt).toFormat("yyyy/MM/dd"),perfectAttendanceMembers:d.perfectAttendanceMemberUids.map(l=>o[l]).filter(l=>!!l)}:null},[e.data,s.data,n.data]);return{isLoading:i,memberWithVacationCountList:r,recentRaidHistoryWithPerfectAttendanceMember:m}},It="_container_mt28n_1",Ct="_vacationItem_mt28n_1",At="_recentAttendance_mt28n_1",kt="_recentAttendanceContent_mt28n_1",Tt="_contentList_mt28n_1",Rt="_mainTitle_mt28n_7",Mt="_contentTitle_mt28n_13",Bt="_backgroundImage_mt28n_36",$t="_vacationList_mt28n_59",wt="_vacationCount_mt28n_74",g={container:It,vacationItem:Ct,recentAttendance:At,recentAttendanceContent:kt,contentList:Tt,mainTitle:Rt,contentTitle:Mt,backgroundImage:Bt,vacationList:$t,vacationCount:wt},Et=()=>{const{isLoading:e,memberWithVacationCountList:n,recentRaidHistoryWithPerfectAttendanceMember:s}=Lt();return t.jsxs("div",{className:g.container,children:[e&&t.jsx(C,{}),s&&t.jsxs("div",{className:g.recentAttendance,children:[t.jsx("img",{className:g.backgroundImage,src:"assets/images/reward.gif",alt:"reward"}),t.jsxs("div",{className:g.recentAttendanceContent,children:[t.jsxs("h4",{className:g.contentTitle,children:["시즌 ",s.raidNo," -"," ",s.raidName," 개근맨"]}),t.jsx("div",{className:g.contentList,children:s.perfectAttendanceMembers.sort((i,a)=>i.nickname.localeCompare(a.nickname)).map(({uid:i,nickname:a})=>t.jsxs(B,{children:["👍",a]},i))})]})]}),t.jsx("h3",{className:g.mainTitle,children:"🤑 휴가 현황표"}),t.jsx("ul",{className:g.vacationList,children:n.map(i=>t.jsxs("li",{className:g.vacationItem,children:[t.jsx("span",{children:i.nickname}),t.jsxs("div",{className:g.vacationCount,children:[t.jsxs("span",{children:["남은 휴가: ",t.jsxs("b",{children:[i.availableVacationCount,"일"]})]}),t.jsxs("span",{children:["사용한 휴가: ",t.jsxs("b",{children:[i.usedVacationCount,"일"]})]})]})]},i.uid))})]})},Dt=()=>t.jsx(Et,{}),qt="_blockButton_1ma5n_1",Ft="_content_1ma5n_1",Ht="_title_1ma5n_1",Vt="_backgroundImage_1ma5n_26",Ot="_icon_1ma5n_45",f={blockButton:qt,content:Ft,title:Ht,backgroundImage:Vt,icon:Ot},O=({icon:e,title:n,backgroundImageURL:s,className:i,onClick:a})=>t.jsxs("button",{type:"button",className:q(f.blockButton,i),onClick:a,children:[t.jsx("img",{className:f.backgroundImage,src:s,alt:n}),t.jsxs("div",{className:f.content,children:[e&&t.jsx("div",{className:f.icon,children:e}),n&&t.jsx("div",{className:f.title,children:n})]})]}),Qt="_iconButton_pcfkl_1",St={iconButton:Qt},Q=({children:e,className:n,onClick:s})=>t.jsx("button",{type:"button",className:q(St.iconButton,n),onClick:s,children:e}),Kt=()=>e=>{window.open(e,"_blank")},S=()=>{const e=Kt(),n=()=>[{iconURL:"assets/images/daum-cafe.png",iconAlt:"가디언 테일즈 공식 카페",title:"공식 카페",backgroundImageURL:"assets/images/daum-cafe-bg.webp",onClick:()=>{e("https://cafe.daum.net/GuardianTales")}},{iconURL:"assets/images/rank.png",iconAlt:"때려잡기",title:"레이드 순위",backgroundImageURL:"assets/images/rank-bg.webp",to:"/ranks"},{iconURL:"assets/images/vacation.png",iconAlt:"안녕",title:"휴가 현황표",backgroundImageURL:"assets/images/vacation-bg.webp",to:"/attendance"},{iconURL:"assets/images/raid-history.png",iconAlt:"보스",title:"레이드 일지",backgroundImageURL:"assets/images/raid-history-bg.webp",to:"/raid-histories"}];return{navList:h.useMemo(()=>n(),[])}},Pt="_container_114z1_1",Wt="_navButton_114z1_7",zt="_iconImage_114z1_11",L={container:Pt,navButton:Wt,iconImage:zt},Ut=()=>{const{navList:e}=S();return t.jsx("div",{className:L.container,children:e.map(({iconURL:n,iconAlt:s,title:i,backgroundImageURL:a,onClick:c,to:r})=>{const m=t.jsx(O,{className:L.navButton,icon:t.jsx("img",{className:L.iconImage,src:n,alt:s}),title:i,backgroundImageURL:a,onClick:c},n);return c?m:t.jsx(M,{to:r,className:L.navButton,children:m},n)})})},Gt=[{title:"게임에 접속하지 않는 경우 👻",descriptions:["연속 2일 이상 = <b>즉시 추방</b>"]},{title:"레이드에 참여하지 않는 경우 👻👻",descriptions:["시즌 당 6회 이상(2일분) = <b>1일 유예 후 추방</b>","📢 미리, 또는 유예 기간 안에 미 참여 사유를 말해주세요."]},{title:"기타 길드 운영에 해를 주는 경우 👻👻👻",descriptions:["고의적으로 컨텐츠 진행 또는 길드 운영을 방해하는 경우 = <b>1회 경고, 2회 추방</b>"]}],Yt="_ruleList_wz2e5_1",Xt="_mainTitle_wz2e5_7",Jt="_title_wz2e5_13",T={ruleList:Yt,mainTitle:Xt,title:Jt},Zt=()=>t.jsx("div",{children:t.jsxs("div",{children:[t.jsx("h3",{className:T.mainTitle,children:"⚔️ 운영 규칙"}),Gt.map(({title:e,descriptions:n},s)=>{const i=s+1;return t.jsxs("div",{children:[t.jsxs("h4",{className:T.title,children:[i,". ",e]}),t.jsx("ul",{className:T.ruleList,children:n.map(a=>t.jsx("li",{dangerouslySetInnerHTML:{__html:a}},e+a))})]},e)})]})}),te=()=>t.jsxs(t.Fragment,{children:[t.jsx(Ut,{}),t.jsx(Zt,{})]}),ee="_navContainer_qfwyn_1",ne="_navTitle_qfwyn_1",se="_container_qfwyn_7",ae="_navHeader_qfwyn_26",ie="_navClose_qfwyn_33",ce="_navButton_qfwyn_44",oe="_iconImage_qfwyn_50",x={navContainer:ee,navTitle:ne,container:se,navHeader:ae,navClose:ie,navButton:ce,iconImage:oe},re=({onBackdropClick:e,onCloseButtonClick:n})=>{const{navList:s}=S(),i=h.useRef(null),a=c=>{c.target===i.current&&(c.preventDefault(),c.stopPropagation(),e==null||e(c))};return t.jsx("div",{ref:i,role:"button",tabIndex:-1,className:x.container,onClick:a,onKeyDown:P,children:t.jsx(B,{children:t.jsxs("aside",{className:x.navContainer,children:[t.jsxs("div",{className:x.navHeader,children:[t.jsx("span",{className:x.navTitle,children:"Made by Seemspyo"}),t.jsx(Q,{className:x.navClose,onClick:n,children:"X"})]}),t.jsx("nav",{children:t.jsx(ht,{children:s.map(({iconURL:c,iconAlt:r,title:m,backgroundImageURL:u,onClick:_,to:y})=>{const o=t.jsx(O,{className:x.navButton,icon:t.jsx("img",{className:x.iconImage,src:c,alt:r}),title:m,backgroundImageURL:u,onClick:_},c);return _?o:t.jsx(M,{to:y,className:x.navButton,children:o},c)})})})]})})})},de="_container_1asew_1",le="_header_1asew_1",me="_title_1asew_1",ue="_backgroundImage_1asew_19",_e="_titleIcon_1asew_45",ge="_menuButton_1asew_49",he="_content_1asew_54",v={container:de,header:le,title:me,backgroundImage:ue,titleIcon:_e,menuButton:ge,content:he},xe=({children:e})=>{const[n,s]=h.useState(!1),i=W();return h.useEffect(()=>{s(!1)},[i.key]),t.jsxs("div",{className:v.container,children:[t.jsx("img",{className:v.backgroundImage,src:"assets/images/banner.jpg",alt:"Discovery"}),t.jsxs("header",{className:v.header,children:[t.jsx(M,{to:"/",children:t.jsx(B,{children:t.jsxs("h1",{className:v.title,children:[t.jsx("img",{className:v.titleIcon,src:"assets/images/logo.webp",alt:"가디언 테일즈"})," ","Discovery 길드"]})})}),t.jsx(Q,{className:v.menuButton,onClick:()=>s(!0),children:"⚙️"})]}),t.jsx("main",{className:v.content,children:e}),n&&t.jsx(re,{onBackdropClick:()=>s(!1),onCloseButtonClick:()=>s(!1)})]})},je=()=>t.jsx(xe,{children:t.jsx(z,{})}),pe=()=>p({queryKey:["getMembers"],queryFn:H}),ye=()=>p({queryKey:["getRaidHistories"],queryFn:A}),be=()=>p({queryKey:["getRaidAttendances"],queryFn:V}),ve=()=>{const e=pe(),n=ye(),s=be(),i=e.isFetching&&n.isFetching&&s.isFetching,{getVacationEndDate:a}=F(),c=h.useMemo(()=>{const{data:r=[]}=e,{data:m=[]}=n,{data:u=[]}=s,_=R(r,"uid"),y=R(m,"no");return u.map(({raidNo:o,raidEndedAt:d,perfectAttendanceMemberUids:b})=>{const{name:l}=y[o];return{raidNo:o,raidName:l,raidEndedAt:d,vacationEndedAt:a(d).toFormat("yyyy/MM/dd"),perfectAttendanceMembers:b.map(k=>_[k])}}).sort((o,d)=>d.raidNo.localeCompare(o.raidNo))},[e.data,s.data,n.data]);return{isLoading:i,raidHistoryList:c}},Ne="_container_142gj_1",fe="_raidMembers_142gj_1",Le="_raidDate_142gj_1",Ie="_mainTitle_142gj_7",Ce="_raidTitle_142gj_13",Ae="_raidList_142gj_27",ke="_raidItem_142gj_34",Te="_raidItemContent_142gj_40",j={container:Ne,raidMembers:fe,raidDate:Le,mainTitle:Ie,raidTitle:Ce,raidList:Ae,raidItem:ke,raidItemContent:Te},Re=()=>{const{isLoading:e,raidHistoryList:n}=ve();return t.jsxs("div",{className:j.container,children:[e&&t.jsx(C,{}),t.jsx("h3",{className:j.mainTitle,children:"🎲 레이드 일지"}),t.jsx("ul",{className:j.raidList,children:n.map(s=>t.jsxs("li",{className:j.raidItem,children:[t.jsxs("div",{className:j.raidItemContent,children:[t.jsxs("span",{className:j.raidTitle,children:[s.raidNo,". ",s.raidName]}),t.jsxs("div",{className:j.raidDate,children:[t.jsxs("span",{children:["시즌 종료일: ",s.raidEndedAt]}),t.jsxs("span",{children:["휴가 만기일: ",s.vacationEndedAt]})]})]}),t.jsxs("span",{className:j.raidMembers,children:[t.jsx("b",{children:"개근맨:"})," ",s.perfectAttendanceMembers.map(({nickname:i})=>i).join(", ")]})]},s.raidNo))})]})},Me=()=>t.jsx(Re,{}),Be=()=>p({queryKey:["getRaidHistories"],queryFn:A,placeholderData:[]}),$e=()=>{var i,a;const e=Be(),n=h.useMemo(()=>{var r;const c=((r=e.data)!=null?r:[]).sort((m,u)=>u.no.localeCompare(m.no));return{labels:["순위"],datasets:[{label:"순위",data:c.map(({no:m,name:u,rank:_})=>({x:`${m}. ${u}`,y:_}))}]}},[e.data]),s=(a=(i=e.data)==null?void 0:i.length)!=null?a:0;return{isLoading:e.isFetching,chartData:n,dataCount:s}},we="_mainTitle_dctu2_1",Ee="_chartContainer_dctu2_11",De="_chartWrapper_dctu2_16",qe="_chart_dctu2_11",I={mainTitle:we,chartContainer:Ee,chartWrapper:De,chart:qe};U.register(G,Y,X,J,Z,tt,et);const Fe=()=>{const{isLoading:e,chartData:n,dataCount:s}=$e();return t.jsxs("div",{children:[t.jsx("h3",{className:I.mainTitle,children:"🏆 레이드 순위표"}),t.jsxs("div",{className:I.chartContainer,children:[e&&t.jsx(C,{}),t.jsx("div",{className:I.chartWrapper,children:t.jsx("div",{className:I.chart,style:{width:`${s*50}px`},children:t.jsx(nt,{data:n,options:{responsive:!0,maintainAspectRatio:!1,borderColor:"skyblue",scales:{y:{title:{display:!0,text:"순위"},reverse:!0,grid:{tickWidth:50},ticks:{stepSize:20}}}}})})})]})]})},He="_container_1lvrg_1",Ve="_content_1lvrg_1",Oe="_contentTitle_1lvrg_1",Qe="_contentText_1lvrg_7",Se="_contentSub_1lvrg_13",Ke="_backgroundImage_1lvrg_25",N={container:He,content:Ve,contentTitle:Oe,contentText:Qe,contentSub:Se,backgroundImage:Ke},Pe=()=>p({queryKey:["getRaidHistories"],queryFn:A,select:e=>e.sort((n,s)=>s.no.localeCompare(n.no)).at(0)}),We=()=>{const{isFetching:e,data:n}=Pe();return t.jsxs("div",{className:N.container,children:[e&&t.jsx(C,{}),t.jsx("img",{className:N.backgroundImage,src:"assets/images/party.gif",alt:"파티"}),n&&t.jsxs("div",{className:N.content,children:[t.jsxs("h4",{className:N.contentTitle,children:["직전 레이드(시즌",n.no,")"]}),t.jsx("span",{className:N.contentSub,children:n.name}),t.jsxs("span",{className:N.contentText,children:[n.rank,"위"]})]})]})},ze=()=>t.jsxs(t.Fragment,{children:[t.jsx(We,{}),t.jsx(Fe,{})]}),Ue=[{path:"/",element:t.jsx(je,{}),errorElement:t.jsx(lt,{}),children:[{path:"/",element:t.jsx(te,{})},{path:"/ranks",element:t.jsx(ze,{})},{path:"/attendance",element:t.jsx(Dt,{})},{path:"/raid-histories",element:t.jsx(Me,{})}]}],Ge=st(Ue),Ye=()=>{const e=document.getElementById("app");if(!e)return;const n=new at({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}}});it(e).render(t.jsx(h.StrictMode,{children:t.jsx(ct,{client:n,children:t.jsx(ot,{router:Ge})})}))};Ye();
